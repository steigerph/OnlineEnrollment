<?xml version='1.0' encoding='UTF-8' ?>
<<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Admission Portal</title>
        <h:outputStylesheet library="css" name="styles.css" />
    </h:head>

    <h:body>
        <div class="layout-wrapper">

            <!-- Sidebar -->
            <div class="sidebar admission-sidebar">
                <h2>Admission</h2>
                <ui:insert name="sidebar" />

                <!-- Profile Section -->
                <div class="profile-section">
                    <p><strong>#{loginBean.user.fullname}</strong></p>
                    <p:commandLink value="Update Profile" onclick="PF('profileDialog').show();" />
                </div>
            </div>

            <!-- Main Content -->
            <div class="content-area">
                <div class="header admission-header">
                    <span>Welcome, #{loginBean.user.username}</span>
                    <h:outputText value="#{loginBean.userRole}" />
                </div>

                <!-- Dynamic Page Content -->
                <ui:insert name="content" />
            </div>
        </div>

        <!-- Footer -->
        <div class="footer admission-footer">
            <p>&copy; 2025 College Information System</p>
        </div>

        <!-- ACCOUNT SETTINGS MODAL -->
        <p:dialog id="accountSettingsDialog" widgetVar="accountSettingsWidget" header="Account Settings" modal="true" closable="true" width="500">
            <h:form id="accountForm">
                <p:panelGrid columns="2" columnClasses="label,value">
                    <p:outputLabel value="Username:" />
                    <p:inputText value="#{accountSettingsBean.username}" />

                    <p:outputLabel value="First Name:" />
                    <p:inputText value="#{accountSettingsBean.firstName}" />

                    <p:outputLabel value="Last Name:" />
                    <p:inputText value="#{accountSettingsBean.lastName}" />

                    <p:outputLabel value="Current Password:" />
                    <p:password value="#{accountSettingsBean.currentPassword}" />

                    <p:outputLabel value="New Password:" />
                    <p:password value="#{accountSettingsBean.newPassword}" />
                </p:panelGrid>

                <p:commandButton value="Update" action="#{accountSettingsBean.updateInfo}" update="@form" />
            </h:form>
        </p:dialog>
    </h:body>
</html>
