<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="sidebar">
        <!-- Sidebar content -->
        <h:form>
            <p:link outcome="registrar" value="Dashboard" style="color:white;" />
            <!-- Add more links as needed -->
        </h:form>
    </ui:define>

    <ui:define name="content">
        <h:form id="programForm">
            <p:panel header="Program Management" styleClass="maroon-theme">
                <h:panelGrid columns="2" cellpadding="5">
                    <h:outputLabel value="Program Code:" for="code" />
                    <p:inputText id="code" value="#{programBean.program.program_code}" required="true" requiredMessage="Code is required" />

                    <h:outputLabel value="Program Name:" for="name" />
                    <p:inputText id="name" value="#{programBean.program.program_name}" required="true" requiredMessage="Name is required" />
                </h:panelGrid>

                <p:commandButton value="Save Program"
                                 action="#{programBean.saveProgram}"
                                 update="programForm :globalMessageForm:msgs" />
                <p:separator />

                <p:dataTable value="#{programBean.programList}" var="p" editable="true" paginator="true" rows="10">
                    <p:column headerText="Code">#{p.program_code}</p:column>
                    <p:column headerText="Name">#{p.program_name}</p:column>
                    <p:column headerText="Actions">
                        <p:commandButton value="Edit" action="#{programBean.editProgram(p)}" update="programForm" />
                        <p:commandButton value="Yes"
                                         action="#{programBean.deleteProgramConfirmed}"
                                         update=":programForm :globalMessageForm:msgs"
                                         oncomplete="PF('deleteDialog').hide()" />

                    </p:column>
                </p:dataTable>
            </p:panel>
        </h:form>
        <h:form id="confirmDeleteForm">
            <p:confirmDialog widgetVar="deleteDialog" header="Confirm Delete" message="Are you sure you want to delete this program?" severity="alert" showEffect="fade">
                <p:commandButton value="Yes" action="#{programBean.deleteProgramConfirmed}" update=":programForm :globalMessageForm:msgs" oncomplete="PF('deleteDialog').hide()" />
                <p:commandButton value="No" onclick="PF('deleteDialog').hide()" type="button" />
            </p:confirmDialog>
        </h:form>

    </ui:define>
</ui:composition>
