<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>College Enrollment System</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"/>
        <style>
            body {
                background-color: #f8f9fa;
            }
            .navbar-custom {
                background-color: #6a1b9a;
            }
            .navbar-custom .navbar-brand,
            .navbar-custom .nav-link {
                color: white;
            }
            .module-card {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .module-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            }
            .footer {
                background-color: #6a1b9a;
                color: white;
                text-align: right;
                padding: 1rem;
                margin-top: 50px;
            }
        </style>
    </h:head>

    <h:body>

        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-custom">
            <div class="container-fluid">
                <h:graphicImage library="logo" name="logo.png" style="height: 40px; margin-right: 15px;" alt="Logo"/>
                <a class="navbar-brand" href="#">Alitagtag College, Inc. - Enrollment System</a>
                <div class="d-flex">
                    <h:panelGroup rendered="#{loginBean.loggedIn}">
                        <h:outputText value="Welcome, #{loginBean.user.firstname}" styleClass="text-white me-3"/>
                        <h:form>
                            <p:commandButton value="Logout" action="#{loginBean.logout}" styleClass="btn btn-light btn-sm"/>
                        </h:form>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{not loginBean.loggedIn}">
                        <button type="button" class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#loginModal">
                            Login
                        </button>
                    </h:panelGroup>
                </div>
            </div>
        </nav>

        <!-- Carousel -->
        <h:form>
            <p:carousel value="#{carouselUploadBean.imageList}" var="img" circular="true" autoPlayInterval="4000" numVisible="1"
                        style="max-width: 1200px; margin: 20px auto;">
                <p:graphicImage value="#{resource['images/' += img]}" style="width:100%; height:auto;"/>
            </p:carousel>
        </h:form>

        <!-- Module Cards -->
        <div class="container mt-4">
            <div class="row g-4 justify-content-center">
                <ui:repeat value="#{loginBean.loggedIn ? moduleBean.getModulesByRole(loginBean.user.role) : moduleBean.moduleList}" var="module">
                    <div class="col-md-4">
                        <div class="card module-card border-0 shadow-sm text-center" style="background-color: #{module.color}; color: white;">
                            <div class="card-body">
                                <i class="#{module.icon} fa-3x mb-3"></i>
                                <h5 class="card-title">#{module.name}</h5>
                                <p class="card-text">#{module.description}</p>
                                <h:link rendered="#{loginBean.loggedIn}"
                                        value="Go to #{module.name}"
                                        outcome="#{module.page}"
                                        styleClass="btn btn-light btn-sm"/>

                                <a href="#" rendered="#{!loginBean.loggedIn}"
                                   class="btn btn-outline-light btn-sm"
                                   data-bs-toggle="modal"
                                   data-bs-target="#loginModal">
                                    Go to #{module.name}
                                </a>
                            </div>
                        </div>
                    </div>
                </ui:repeat>
            </div>
        </div>

        <!-- Include Login Modal -->
        <ui:include src="login-modal.xhtml"/>

        <!-- Footer -->
        <div class="footer">
            <span>Â© 2025 College Enrollment System</span>
        </div>

    </h:body>
</html>
